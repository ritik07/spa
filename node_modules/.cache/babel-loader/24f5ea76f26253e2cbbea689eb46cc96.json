{"ast":null,"code":"/**\n * @fileoverview pattern\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar Pattern = /** @class */function () {\n  function Pattern(cfg) {\n    this.cfg = {};\n    var el = createSVGElement('pattern');\n    el.setAttribute('patternUnits', 'userSpaceOnUse');\n    var child = createSVGElement('image');\n    el.appendChild(child);\n    var id = uniqueId('pattern_');\n    el.id = id;\n    this.el = el;\n    this.id = id;\n    this.cfg = cfg;\n    var arr = regexPR.exec(cfg);\n    var source = arr[2];\n    child.setAttribute('href', source);\n    var img = new Image();\n    if (!source.match(/^data:/i)) {\n      img.crossOrigin = 'Anonymous';\n    }\n    img.src = source;\n    function onload() {\n      el.setAttribute('width', \"\" + img.width);\n      el.setAttribute('height', \"\" + img.height);\n    }\n    if (img.complete) {\n      onload();\n    } else {\n      img.onload = onload;\n      // Fix onload() bug in IE9\n      img.src = img.src;\n    }\n    return this;\n  }\n  Pattern.prototype.match = function (type, attr) {\n    return this.cfg === attr;\n  };\n  return Pattern;\n}();\nexport default Pattern;","map":{"version":3,"sources":["../../src/defs/pattern.ts"],"names":[],"mappings":"AAAA;;;AAGG;AAEH,SAAS,QAAQ,QAAQ,YAAY;AACrC,SAAS,gBAAgB,QAAQ,aAAa;AAE9C,IAAM,OAAO,GAAG,iCAAiC;AAEjD,IAAA,OAAA,GAAA,aAAA,YAAA;EAOE,SAAA,OAAA,CAAY,GAAG,EAAA;IAJf,IAAA,CAAA,GAAG,GAEC,CAAA,CAAE;IAGJ,IAAM,EAAE,GAAG,gBAAgB,CAAC,SAAS,CAAsB;IAC3D,EAAE,CAAC,YAAY,CAAC,cAAc,EAAE,gBAAgB,CAAC;IACjD,IAAM,KAAK,GAAG,gBAAgB,CAAC,OAAO,CAAC;IACvC,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC;IACrB,IAAM,EAAE,GAAG,QAAQ,CAAC,UAAU,CAAC;IAC/B,EAAE,CAAC,EAAE,GAAG,EAAE;IACV,IAAI,CAAC,EAAE,GAAG,EAAE;IACZ,IAAI,CAAC,EAAE,GAAG,EAAE;IACZ,IAAI,CAAC,GAAG,GAAG,GAAG;IACd,IAAM,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC;IAC7B,IAAM,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC;IACrB,KAAK,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;IAClC,IAAM,GAAG,GAAG,IAAI,KAAK,EAAE;IACvB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE;MAC5B,GAAG,CAAC,WAAW,GAAG,WAAW;IAC9B;IACD,GAAG,CAAC,GAAG,GAAG,MAAM;IAChB,SAAS,MAAM,GAAA;MACb,EAAE,CAAC,YAAY,CAAC,OAAO,EAAE,EAAA,GAAG,GAAG,CAAC,KAAO,CAAC;MACxC,EAAE,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAA,GAAG,GAAG,CAAC,MAAQ,CAAC;IAC5C;IACA,IAAI,GAAG,CAAC,QAAQ,EAAE;MAChB,MAAM,EAAE;KACT,MAAM;MACL,GAAG,CAAC,MAAM,GAAG,MAAM;MACnB;MACA,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG;IAClB;IAED,OAAO,IAAI;EACb;EAEA,OAAA,CAAA,SAAA,CAAA,KAAK,GAAL,UAAM,IAAI,EAAE,IAAI,EAAA;IACd,OAAO,IAAI,CAAC,GAAG,KAAK,IAAI;EAC1B,CAAC;EACH,OAAA,OAAC;AAAD,CAAC,EAAA;AAED,eAAe,OAAO","sourceRoot":"","sourcesContent":["/**\n * @fileoverview pattern\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar Pattern = /** @class */ (function () {\n    function Pattern(cfg) {\n        this.cfg = {};\n        var el = createSVGElement('pattern');\n        el.setAttribute('patternUnits', 'userSpaceOnUse');\n        var child = createSVGElement('image');\n        el.appendChild(child);\n        var id = uniqueId('pattern_');\n        el.id = id;\n        this.el = el;\n        this.id = id;\n        this.cfg = cfg;\n        var arr = regexPR.exec(cfg);\n        var source = arr[2];\n        child.setAttribute('href', source);\n        var img = new Image();\n        if (!source.match(/^data:/i)) {\n            img.crossOrigin = 'Anonymous';\n        }\n        img.src = source;\n        function onload() {\n            el.setAttribute('width', \"\" + img.width);\n            el.setAttribute('height', \"\" + img.height);\n        }\n        if (img.complete) {\n            onload();\n        }\n        else {\n            img.onload = onload;\n            // Fix onload() bug in IE9\n            img.src = img.src;\n        }\n        return this;\n    }\n    Pattern.prototype.match = function (type, attr) {\n        return this.cfg === attr;\n    };\n    return Pattern;\n}());\nexport default Pattern;\n//# sourceMappingURL=pattern.js.map"]},"metadata":{},"sourceType":"module"}