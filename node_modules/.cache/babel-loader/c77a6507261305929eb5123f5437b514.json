{"ast":null,"code":"import { filter, isNil, isNumber, last } from '@antv/util';\n/**\n * 计算分类 ticks\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function calculateCatTicks(cfg) {\n  var values = cfg.values,\n    tickInterval = cfg.tickInterval,\n    tickCount = cfg.tickCount,\n    showLast = cfg.showLast;\n  if (isNumber(tickInterval)) {\n    var ticks_1 = filter(values, function (__, i) {\n      return i % tickInterval === 0;\n    });\n    var lastValue = last(values);\n    if (showLast && last(ticks_1) !== lastValue) {\n      ticks_1.push(lastValue);\n    }\n    return ticks_1;\n  }\n  var len = values.length;\n  var min = cfg.min,\n    max = cfg.max;\n  if (isNil(min)) {\n    min = 0;\n  }\n  if (isNil(max)) {\n    max = values.length - 1;\n  }\n  if (!isNumber(tickCount) || tickCount >= len) return values.slice(min, max + 1);\n  if (tickCount <= 0 || max <= 0) return [];\n  var interval = tickCount === 1 ? len : Math.floor(len / (tickCount - 1));\n  var ticks = [];\n  var idx = min;\n  for (var i = 0; i < tickCount; i++) {\n    if (idx >= max) break;\n    idx = Math.min(min + i * interval, max);\n    if (i === tickCount - 1 && showLast) ticks.push(values[max]);else ticks.push(values[idx]);\n  }\n  return ticks;\n}","map":{"version":3,"sources":["../../src/tick-method/cat.ts"],"names":[],"mappings":"AAAA,SAAS,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,QAAQ,YAAY;AAG1D;;;;AAIG;AACH,eAAc,SAAU,iBAAiB,CAAC,GAAgB,EAAA;EAChD,IAAA,MAAM,GAAwC,GAAG,CAAA,MAA3C;IAAE,YAAY,GAA0B,GAAG,CAAA,YAA7B;IAAE,SAAS,GAAe,GAAG,CAAA,SAAlB;IAAE,QAAQ,GAAK,GAAG,CAAA,QAAR;EAEjD,IAAI,QAAQ,CAAC,YAAY,CAAC,EAAE;IAC1B,IAAM,OAAK,GAAG,MAAM,CAAC,MAAM,EAAE,UAAC,EAAO,EAAE,CAAS,EAAA;MAAK,OAAA,CAAC,GAAG,YAAY,KAAK,CAAC;IAAtB,CAAsB,CAAC;IAC5E,IAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;IAC9B,IAAI,QAAQ,IAAI,IAAI,CAAC,OAAK,CAAC,KAAK,SAAS,EAAE;MACzC,OAAK,CAAC,IAAI,CAAC,SAAS,CAAC;IACtB;IACD,OAAO,OAAK;EACb;EAED,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM;EACnB,IAAA,GAAG,GAAU,GAAG,CAAA,GAAb;IAAE,GAAG,GAAK,GAAG,CAAA,GAAR;EACd,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE;IACd,GAAG,GAAG,CAAC;EACR;EACD,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE;IACd,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC;EACxB;EAED,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,SAAS,IAAI,GAAG,EAAE,OAAO,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC;EAC/E,IAAI,SAAS,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,OAAO,EAAE;EAEzC,IAAM,QAAQ,GAAG,SAAS,KAAK,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,SAAS,GAAG,CAAC,CAAC,CAAC;EAC1E,IAAM,KAAK,GAAG,EAAE;EAEhB,IAAI,GAAG,GAAG,GAAG;EACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAE;IAClC,IAAI,GAAG,IAAI,GAAG,EAAE;IAEhB,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,QAAQ,EAAE,GAAG,CAAC;IACvC,IAAI,CAAC,KAAK,SAAS,GAAG,CAAC,IAAI,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,KACxD,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;EAC7B;EACD,OAAO,KAAK;AACd","sourceRoot":"","sourcesContent":["import { filter, isNil, isNumber, last } from '@antv/util';\n/**\n * 计算分类 ticks\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function calculateCatTicks(cfg) {\n    var values = cfg.values, tickInterval = cfg.tickInterval, tickCount = cfg.tickCount, showLast = cfg.showLast;\n    if (isNumber(tickInterval)) {\n        var ticks_1 = filter(values, function (__, i) { return i % tickInterval === 0; });\n        var lastValue = last(values);\n        if (showLast && last(ticks_1) !== lastValue) {\n            ticks_1.push(lastValue);\n        }\n        return ticks_1;\n    }\n    var len = values.length;\n    var min = cfg.min, max = cfg.max;\n    if (isNil(min)) {\n        min = 0;\n    }\n    if (isNil(max)) {\n        max = values.length - 1;\n    }\n    if (!isNumber(tickCount) || tickCount >= len)\n        return values.slice(min, max + 1);\n    if (tickCount <= 0 || max <= 0)\n        return [];\n    var interval = tickCount === 1 ? len : Math.floor(len / (tickCount - 1));\n    var ticks = [];\n    var idx = min;\n    for (var i = 0; i < tickCount; i++) {\n        if (idx >= max)\n            break;\n        idx = Math.min(min + i * interval, max);\n        if (i === tickCount - 1 && showLast)\n            ticks.push(values[max]);\n        else\n            ticks.push(values[idx]);\n    }\n    return ticks;\n}\n//# sourceMappingURL=cat.js.map"]},"metadata":{},"sourceType":"module"}