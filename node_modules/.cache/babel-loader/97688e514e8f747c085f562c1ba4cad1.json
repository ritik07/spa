{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isNumber, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom } from '../util/util';\nvar HtmlAnnotation = /** @class */function (_super) {\n  __extends(HtmlAnnotation, _super);\n  function HtmlAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  HtmlAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'html',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      containerTpl: \"<div class=\\\"g2-html-annotation\\\" style=\\\"position:absolute\\\"></div>\",\n      alignX: 'left',\n      alignY: 'top',\n      html: '',\n      zIndex: 7\n    });\n  };\n  HtmlAnnotation.prototype.render = function () {\n    var container = this.getContainer();\n    var html = this.get('html');\n    clearDom(container);\n    var rst = isFunction(html) ? html(container) : html;\n    if (isElement(rst)) {\n      container.appendChild(rst);\n    } else if (isString(rst) || isNumber(rst)) {\n      var dom = createDom(\"\" + rst);\n      if (dom) {\n        container.appendChild(dom);\n      }\n    }\n    this.resetPosition();\n  };\n  HtmlAnnotation.prototype.resetPosition = function () {\n    var container = this.getContainer();\n    var _a = this.getLocation(),\n      x = _a.x,\n      y = _a.y;\n    var alignX = this.get('alignX');\n    var alignY = this.get('alignY');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var domWidth = getOuterWidth(container);\n    var domHeight = getOuterHeight(container);\n    var position = {\n      x: x,\n      y: y\n    };\n    if (alignX === 'middle') {\n      position.x -= Math.round(domWidth / 2);\n    } else if (alignX === 'right') {\n      position.x -= Math.round(domWidth);\n    }\n    if (alignY === 'middle') {\n      position.y -= Math.round(domHeight / 2);\n    } else if (alignY === 'bottom') {\n      position.y -= Math.round(domHeight);\n    }\n    if (offsetX) {\n      position.x += offsetX;\n    }\n    if (offsetY) {\n      position.y += offsetY;\n    }\n    modifyCSS(container, {\n      position: 'absolute',\n      left: position.x + \"px\",\n      top: position.y + \"px\",\n      zIndex: this.get('zIndex')\n    });\n  };\n  return HtmlAnnotation;\n}(HtmlComponent);\nexport default HtmlAnnotation;","map":{"version":3,"sources":["../../src/annotation/html.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isNumber, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom } from '../util/util';\nvar HtmlAnnotation = /** @class */ (function (_super) {\n    __extends(HtmlAnnotation, _super);\n    function HtmlAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'html', locationType: 'point', x: 0, y: 0, containerTpl: \"<div class=\\\"g2-html-annotation\\\" style=\\\"position:absolute\\\"></div>\", alignX: 'left', alignY: 'top', html: '', zIndex: 7 });\n    };\n    HtmlAnnotation.prototype.render = function () {\n        var container = this.getContainer();\n        var html = this.get('html');\n        clearDom(container);\n        var rst = isFunction(html) ? html(container) : html;\n        if (isElement(rst)) {\n            container.appendChild(rst);\n        }\n        else if (isString(rst) || isNumber(rst)) {\n            var dom = createDom(\"\" + rst);\n            if (dom) {\n                container.appendChild(dom);\n            }\n        }\n        this.resetPosition();\n    };\n    HtmlAnnotation.prototype.resetPosition = function () {\n        var container = this.getContainer();\n        var _a = this.getLocation(), x = _a.x, y = _a.y;\n        var alignX = this.get('alignX');\n        var alignY = this.get('alignY');\n        var offsetX = this.get('offsetX');\n        var offsetY = this.get('offsetY');\n        var domWidth = getOuterWidth(container);\n        var domHeight = getOuterHeight(container);\n        var position = {\n            x: x,\n            y: y,\n        };\n        if (alignX === 'middle') {\n            position.x -= Math.round(domWidth / 2);\n        }\n        else if (alignX === 'right') {\n            position.x -= Math.round(domWidth);\n        }\n        if (alignY === 'middle') {\n            position.y -= Math.round(domHeight / 2);\n        }\n        else if (alignY === 'bottom') {\n            position.y -= Math.round(domHeight);\n        }\n        if (offsetX) {\n            position.x += offsetX;\n        }\n        if (offsetY) {\n            position.y += offsetY;\n        }\n        modifyCSS(container, {\n            position: 'absolute',\n            left: position.x + \"px\",\n            top: position.y + \"px\",\n            zIndex: this.get('zIndex'),\n        });\n    };\n    return HtmlAnnotation;\n}(HtmlComponent));\nexport default HtmlAnnotation;\n//# sourceMappingURL=html.js.map"]},"metadata":{},"sourceType":"module"}