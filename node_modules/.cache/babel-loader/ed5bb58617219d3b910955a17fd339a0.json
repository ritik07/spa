{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/pp/doggiesthan app/spa/src/paytm-button/paytmButton.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaytmChecksum = require(\"./paytmChecksum\");\nconst https = require(\"https\");\nexport function PaytmButton() {\n  _s();\n  const [paymentData, setPaymentData] = useState({\n    token: \"\",\n    order: \"\",\n    mid: \"\",\n    amount: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    initialize();\n  }, []);\n  const initialize = () => {\n    let orderId = \"Order_\" + new Date().getTime();\n\n    // Sandbox Credentials\n    let mid = \"nKFgfa13379942978299\"; // Merchant ID\n    let mkey = \"F@l6ftRryWoeAlIH\"; // Merhcant Key\n    var paytmParams = {};\n    paytmParams.body = {\n      requestType: \"Payment\",\n      mid: mid,\n      websiteName: \"WEBSTAGING\",\n      orderId: orderId,\n      callbackUrl: \"https://merchant.com/callback\",\n      txnAmount: {\n        value: 100,\n        currency: \"INR\"\n      },\n      userInfo: {\n        custId: \"1001\"\n      }\n    };\n    PaytmChecksum.generateSignature(JSON.stringify(paytmParams.body), mkey).then(function (checksum) {\n      console.log(checksum);\n      paytmParams.head = {\n        signature: checksum\n      };\n      var post_data = JSON.stringify(paytmParams);\n      var options = {\n        /* for Staging */\n        hostname: \"securegw-stage.paytm.in\" /* for Production */,\n\n        // hostname: 'securegw.paytm.in',\n\n        port: 443,\n        path: `/theia/api/v1/initiateTransaction?mid=${mid}&orderId=${orderId}`,\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Content-Length\": post_data.length\n        }\n      };\n      var response = \"\";\n      var post_req = https.request(options, function (post_res) {\n        post_res.on(\"data\", function (chunk) {\n          response += chunk;\n        });\n        post_res.on(\"end\", function () {\n          console.log(\"Response: \", response);\n          // res.json({data: JSON.parse(response), orderId: orderId, mid: mid, amount: amount});\n          setPaymentData({\n            ...paymentData,\n            token: JSON.parse(response).body.txnToken,\n            order: orderId,\n            mid: mid,\n            amount: 100\n          });\n        });\n      });\n      post_req.write(post_data);\n      post_req.end();\n    });\n  };\n  const makePayment = () => {\n    setLoading(true);\n    var config = {\n      root: \"\",\n      style: {\n        bodyBackgroundColor: \"#fafafb\",\n        bodyColor: \"\",\n        themeBackgroundColor: \"#0FB8C9\",\n        themeColor: \"#ffffff\",\n        headerBackgroundColor: \"#284055\",\n        headerColor: \"#ffffff\",\n        errorColor: \"\",\n        successColor: \"\",\n        card: {\n          padding: \"\",\n          backgroundColor: \"\"\n        }\n      },\n      data: {\n        orderId: paymentData.order,\n        token: paymentData.token,\n        tokenType: \"TXN_TOKEN\",\n        amount: paymentData.amount /* update amount */\n      },\n\n      payMode: {\n        labels: {},\n        filter: {\n          exclude: []\n        },\n        order: [\"CC\", \"DC\", \"NB\", \"UPI\", \"PPBL\", \"PPI\", \"BALANCE\"]\n      },\n      website: \"WEBSTAGING\",\n      flow: \"DEFAULT\",\n      merchant: {\n        mid: paymentData.mid,\n        redirect: false\n      },\n      handler: {\n        transactionStatus: function transactionStatus(paymentStatus) {\n          window.location.reload();\n          console.log(\"paymentStatus => \", paymentStatus);\n          setLoading(false);\n        },\n        notifyMerchant: function notifyMerchant(eventName, data) {\n          console.log(\"Closed\");\n          setLoading(false);\n        }\n      }\n    };\n    if (window.Paytm && window.Paytm.CheckoutJS) {\n      // initialze configuration using init method\n      window.Paytm.CheckoutJS.init(config).then(function onSuccess() {\n        console.log(\"Before JS Checkout invoke\");\n        // after successfully update configuration invoke checkoutjs\n        window.Paytm.CheckoutJS.invoke();\n      }).catch(function onError(error) {\n        console.log(\"Error => \", error);\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loading ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"https://c.tenor.com/I6kN-6X7nhAAAAAj/loading-buffering.gif\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: makePayment,\n      children: \"Pay Now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n}\n_s(PaytmButton, \"LlmL0o1CS/cCGkUjiO0CKhkz/2I=\");\n_c = PaytmButton;\nvar _c;\n$RefreshReg$(_c, \"PaytmButton\");","map":{"version":3,"names":["React","useEffect","useState","PaytmChecksum","require","https","PaytmButton","paymentData","setPaymentData","token","order","mid","amount","loading","setLoading","initialize","orderId","Date","getTime","mkey","paytmParams","body","requestType","websiteName","callbackUrl","txnAmount","value","currency","userInfo","custId","generateSignature","JSON","stringify","then","checksum","console","log","head","signature","post_data","options","hostname","port","path","method","headers","length","response","post_req","request","post_res","on","chunk","parse","txnToken","write","end","makePayment","config","root","style","bodyBackgroundColor","bodyColor","themeBackgroundColor","themeColor","headerBackgroundColor","headerColor","errorColor","successColor","card","padding","backgroundColor","data","tokenType","payMode","labels","filter","exclude","website","flow","merchant","redirect","handler","transactionStatus","paymentStatus","window","location","reload","notifyMerchant","eventName","Paytm","CheckoutJS","init","onSuccess","invoke","catch","onError","error"],"sources":["/Users/apple/Documents/pp/doggiesthan app/spa/src/paytm-button/paytmButton.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nconst PaytmChecksum = require(\"./paytmChecksum\");\nconst https = require(\"https\");\n\nexport function PaytmButton() {\n  const [paymentData, setPaymentData] = useState({\n    token: \"\",\n    order: \"\",\n    mid: \"\",\n    amount: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    initialize();\n  }, []);\n\n  const initialize = () => {\n    let orderId = \"Order_\" + new Date().getTime();\n\n    // Sandbox Credentials\n    let mid = \"nKFgfa13379942978299\"; // Merchant ID\n    let mkey = \"F@l6ftRryWoeAlIH\"; // Merhcant Key\n    var paytmParams = {};\n\n    paytmParams.body = {\n      requestType: \"Payment\",\n      mid: mid,\n      websiteName: \"WEBSTAGING\",\n      orderId: orderId,\n      callbackUrl: \"https://merchant.com/callback\",\n      txnAmount: {\n        value: 100,\n        currency: \"INR\",\n      },\n      userInfo: {\n        custId: \"1001\",\n      },\n    };\n\n    PaytmChecksum.generateSignature(\n      JSON.stringify(paytmParams.body),\n      mkey\n    ).then(function (checksum) {\n      console.log(checksum);\n      paytmParams.head = {\n        signature: checksum,\n      };\n\n      var post_data = JSON.stringify(paytmParams);\n\n      var options = {\n        /* for Staging */\n        hostname: \"securegw-stage.paytm.in\" /* for Production */,\n\n        // hostname: 'securegw.paytm.in',\n\n        port: 443,\n        path: `/theia/api/v1/initiateTransaction?mid=${mid}&orderId=${orderId}`,\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Content-Length\": post_data.length,\n        },\n      };\n\n      var response = \"\";\n      var post_req = https.request(options, function (post_res) {\n        post_res.on(\"data\", function (chunk) {\n          response += chunk;\n        });\n        post_res.on(\"end\", function () {\n          console.log(\"Response: \", response);\n          // res.json({data: JSON.parse(response), orderId: orderId, mid: mid, amount: amount});\n          setPaymentData({\n            ...paymentData,\n            token: JSON.parse(response).body.txnToken,\n            order: orderId,\n            mid: mid,\n            amount: 100,\n          });\n        });\n      });\n\n      post_req.write(post_data);\n      post_req.end();\n    });\n  };\n\n  const makePayment = () => {\n    setLoading(true);\n    var config = {\n      root: \"\",\n      style: {\n        bodyBackgroundColor: \"#fafafb\",\n        bodyColor: \"\",\n        themeBackgroundColor: \"#0FB8C9\",\n        themeColor: \"#ffffff\",\n        headerBackgroundColor: \"#284055\",\n        headerColor: \"#ffffff\",\n        errorColor: \"\",\n        successColor: \"\",\n        card: {\n          padding: \"\",\n          backgroundColor: \"\",\n        },\n      },\n      data: {\n        orderId: paymentData.order,\n        token: paymentData.token,\n        tokenType: \"TXN_TOKEN\",\n        amount: paymentData.amount /* update amount */,\n      },\n      payMode: {\n        labels: {},\n        filter: {\n          exclude: [],\n        },\n        order: [\"CC\", \"DC\", \"NB\", \"UPI\", \"PPBL\", \"PPI\", \"BALANCE\"],\n      },\n      website: \"WEBSTAGING\",\n      flow: \"DEFAULT\",\n      merchant: {\n        mid: paymentData.mid,\n        redirect: false,\n      },\n      handler: {\n        transactionStatus: function transactionStatus(paymentStatus) {\n          window.location.reload();\n          console.log(\"paymentStatus => \", paymentStatus);\n          setLoading(false);\n        },\n        notifyMerchant: function notifyMerchant(eventName, data) {\n          console.log(\"Closed\");\n          setLoading(false);\n        },\n      },\n    };\n\n    if (window.Paytm && window.Paytm.CheckoutJS) {\n      // initialze configuration using init method\n      window.Paytm.CheckoutJS.init(config)\n        .then(function onSuccess() {\n          console.log(\"Before JS Checkout invoke\");\n          // after successfully update configuration invoke checkoutjs\n          window.Paytm.CheckoutJS.invoke();\n        })\n        .catch(function onError(error) {\n          console.log(\"Error => \", error);\n        });\n    }\n  };\n\n  return (\n    <div>\n      {loading ? (\n        <img src=\"https://c.tenor.com/I6kN-6X7nhAAAAAj/loading-buffering.gif\" />\n      ) : (\n        <button onClick={makePayment}>Pay Now</button>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}