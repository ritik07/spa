{"ast":null,"code":"/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\nvar Rect = /** @class */function (_super) {\n  __extends(Rect, _super);\n  function Rect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'rect';\n    _this.canFill = true;\n    _this.canStroke = true;\n    return _this;\n  }\n  Rect.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n    return __assign(__assign({}, attrs), {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      radius: 0\n    });\n  };\n  Rect.prototype.createPath = function (context, targetAttrs) {\n    var _this = this;\n    var attrs = this.attr();\n    var el = this.get('el');\n    // 加上状态量，用来标记 path 是否已组装\n    var completed = false;\n    // 和组装 path 相关的绘图属性\n    var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n    each(targetAttrs || attrs, function (value, attr) {\n      if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n        el.setAttribute('d', _this._assembleRect(attrs));\n        completed = true;\n      } else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n  };\n  Rect.prototype._assembleRect = function (attrs) {\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    var radius = attrs.radius;\n    if (!radius) {\n      return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n    }\n    var r = parseRadius(radius);\n    if (isArray(radius)) {\n      if (radius.length === 1) {\n        r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n      } else if (radius.length === 2) {\n        r.r1 = r.r3 = radius[0];\n        r.r2 = r.r4 = radius[1];\n      } else if (radius.length === 3) {\n        r.r1 = radius[0];\n        r.r2 = r.r4 = radius[1];\n        r.r3 = radius[2];\n      } else {\n        r.r1 = radius[0];\n        r.r2 = radius[1];\n        r.r3 = radius[2];\n        r.r4 = radius[3];\n      }\n    } else {\n      r.r1 = r.r2 = r.r3 = r.r4 = radius;\n    }\n    var d = [[\"M \" + (x + r.r1) + \",\" + y], [\"l \" + (w - r.r1 - r.r2) + \",0\"], [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2], [\"l 0,\" + (h - r.r2 - r.r3)], [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3], [\"l \" + (r.r3 + r.r4 - w) + \",0\"], [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4], [\"l 0,\" + (r.r4 + r.r1 - h)], [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1], ['z']];\n    return d.join(' ');\n  };\n  return Rect;\n}(ShapeBase);\nexport default Rect;","map":{"version":3,"sources":["../../src/shape/rect.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'rect';\n        _this.canFill = true;\n        _this.canStroke = true;\n        return _this;\n    }\n    Rect.prototype.getDefaultAttrs = function () {\n        var attrs = _super.prototype.getDefaultAttrs.call(this);\n        return __assign(__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0, radius: 0 });\n    };\n    Rect.prototype.createPath = function (context, targetAttrs) {\n        var _this = this;\n        var attrs = this.attr();\n        var el = this.get('el');\n        // 加上状态量，用来标记 path 是否已组装\n        var completed = false;\n        // 和组装 path 相关的绘图属性\n        var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n        each(targetAttrs || attrs, function (value, attr) {\n            if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n                el.setAttribute('d', _this._assembleRect(attrs));\n                completed = true;\n            }\n            else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n                el.setAttribute(SVG_ATTR_MAP[attr], value);\n            }\n        });\n    };\n    Rect.prototype._assembleRect = function (attrs) {\n        var x = attrs.x;\n        var y = attrs.y;\n        var w = attrs.width;\n        var h = attrs.height;\n        var radius = attrs.radius;\n        if (!radius) {\n            return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n        }\n        var r = parseRadius(radius);\n        if (isArray(radius)) {\n            if (radius.length === 1) {\n                r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n            }\n            else if (radius.length === 2) {\n                r.r1 = r.r3 = radius[0];\n                r.r2 = r.r4 = radius[1];\n            }\n            else if (radius.length === 3) {\n                r.r1 = radius[0];\n                r.r2 = r.r4 = radius[1];\n                r.r3 = radius[2];\n            }\n            else {\n                r.r1 = radius[0];\n                r.r2 = radius[1];\n                r.r3 = radius[2];\n                r.r4 = radius[3];\n            }\n        }\n        else {\n            r.r1 = r.r2 = r.r3 = r.r4 = radius;\n        }\n        var d = [\n            [\"M \" + (x + r.r1) + \",\" + y],\n            [\"l \" + (w - r.r1 - r.r2) + \",0\"],\n            [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2],\n            [\"l 0,\" + (h - r.r2 - r.r3)],\n            [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3],\n            [\"l \" + (r.r3 + r.r4 - w) + \",0\"],\n            [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4],\n            [\"l 0,\" + (r.r4 + r.r1 - h)],\n            [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1],\n            ['z'],\n        ];\n        return d.join(' ');\n    };\n    return Rect;\n}(ShapeBase));\nexport default Rect;\n//# sourceMappingURL=rect.js.map"]},"metadata":{},"sourceType":"module"}