{"ast":null,"code":"import _objectSpread from\"/Users/apple/Documents/pp/doggiesthan app/spa/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/apple/Documents/pp/doggiesthan app/spa/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var PaytmChecksum=require(\"./paytmChecksum\");var https=require(\"https\");export function PaytmButton(){var _useState=useState({token:\"\",order:\"\",mid:\"\",amount:\"\"}),_useState2=_slicedToArray(_useState,2),paymentData=_useState2[0],setPaymentData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){initialize();},[]);var initialize=function initialize(){var orderId=\"Order_\"+new Date().getTime();// Sandbox Credentials\nvar mid=\"nKFgfa13379942978299\";// Merchant ID\nvar mkey=\"F@l6ftRryWoeAlIH\";// Merhcant Key\nvar paytmParams={};paytmParams.body={requestType:\"Payment\",mid:mid,websiteName:\"WEBSTAGING\",orderId:orderId,callbackUrl:\"https://merchant.com/callback\",txnAmount:{value:100,currency:\"INR\"},userInfo:{custId:\"1001\"}};PaytmChecksum.generateSignature(JSON.stringify(paytmParams.body),mkey).then(function(checksum){console.log(checksum);paytmParams.head={signature:checksum};var post_data=JSON.stringify(paytmParams);var options={/* for Staging */hostname:\"securegw-stage.paytm.in\"/* for Production */,// hostname: 'securegw.paytm.in',\nport:443,path:\"/theia/api/v1/initiateTransaction?mid=\".concat(mid,\"&orderId=\").concat(orderId),method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Content-Length\":post_data.length}};var response=\"\";var post_req=https.request(options,function(post_res){post_res.on(\"data\",function(chunk){response+=chunk;});post_res.on(\"end\",function(){console.log(\"Response: \",response);// res.json({data: JSON.parse(response), orderId: orderId, mid: mid, amount: amount});\nsetPaymentData(_objectSpread(_objectSpread({},paymentData),{},{token:JSON.parse(response).body.txnToken,order:orderId,mid:mid,amount:100}));});});post_req.write(post_data);post_req.end();});};var makePayment=function makePayment(){setLoading(true);var config={root:\"\",style:{bodyBackgroundColor:\"#fafafb\",bodyColor:\"\",themeBackgroundColor:\"#0FB8C9\",themeColor:\"#ffffff\",headerBackgroundColor:\"#284055\",headerColor:\"#ffffff\",errorColor:\"\",successColor:\"\",card:{padding:\"\",backgroundColor:\"\"}},data:{orderId:paymentData.order,token:paymentData.token,tokenType:\"TXN_TOKEN\",amount:paymentData.amount/* update amount */},payMode:{labels:{},filter:{exclude:[]},order:[\"CC\",\"DC\",\"NB\",\"UPI\",\"PPBL\",\"PPI\",\"BALANCE\"]},website:\"WEBSTAGING\",flow:\"DEFAULT\",merchant:{mid:paymentData.mid,redirect:false},handler:{transactionStatus:function transactionStatus(paymentStatus){window.location.reload();console.log(\"paymentStatus => \",paymentStatus);setLoading(false);},notifyMerchant:function notifyMerchant(eventName,data){console.log(\"Closed\");setLoading(false);}}};if(window.Paytm&&window.Paytm.CheckoutJS){// initialze configuration using init method\nwindow.Paytm.CheckoutJS.init(config).then(function onSuccess(){console.log(\"Before JS Checkout invoke\");// after successfully update configuration invoke checkoutjs\nwindow.Paytm.CheckoutJS.invoke();}).catch(function onError(error){console.log(\"Error => \",error);});}};return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"img\",{src:\"https://c.tenor.com/I6kN-6X7nhAAAAAj/loading-buffering.gif\"}):/*#__PURE__*/_jsx(\"button\",{onClick:makePayment,children:\"Pay Now\"})});}","map":{"version":3,"names":["React","useEffect","useState","PaytmChecksum","require","https","PaytmButton","token","order","mid","amount","paymentData","setPaymentData","loading","setLoading","initialize","orderId","Date","getTime","mkey","paytmParams","body","requestType","websiteName","callbackUrl","txnAmount","value","currency","userInfo","custId","generateSignature","JSON","stringify","then","checksum","console","log","head","signature","post_data","options","hostname","port","path","method","headers","length","response","post_req","request","post_res","on","chunk","parse","txnToken","write","end","makePayment","config","root","style","bodyBackgroundColor","bodyColor","themeBackgroundColor","themeColor","headerBackgroundColor","headerColor","errorColor","successColor","card","padding","backgroundColor","data","tokenType","payMode","labels","filter","exclude","website","flow","merchant","redirect","handler","transactionStatus","paymentStatus","window","location","reload","notifyMerchant","eventName","Paytm","CheckoutJS","init","onSuccess","invoke","catch","onError","error"],"sources":["/Users/apple/Documents/pp/doggiesthan app/spa/src/paytm-button/paytmButton.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nconst PaytmChecksum = require(\"./paytmChecksum\");\nconst https = require(\"https\");\n\nexport function PaytmButton() {\n  const [paymentData, setPaymentData] = useState({\n    token: \"\",\n    order: \"\",\n    mid: \"\",\n    amount: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    initialize();\n  }, []);\n\n  const initialize = () => {\n    let orderId = \"Order_\" + new Date().getTime();\n\n    // Sandbox Credentials\n    let mid = \"nKFgfa13379942978299\"; // Merchant ID\n    let mkey = \"F@l6ftRryWoeAlIH\"; // Merhcant Key\n    var paytmParams = {};\n\n    paytmParams.body = {\n      requestType: \"Payment\",\n      mid: mid,\n      websiteName: \"WEBSTAGING\",\n      orderId: orderId,\n      callbackUrl: \"https://merchant.com/callback\",\n      txnAmount: {\n        value: 100,\n        currency: \"INR\",\n      },\n      userInfo: {\n        custId: \"1001\",\n      },\n    };\n\n    PaytmChecksum.generateSignature(\n      JSON.stringify(paytmParams.body),\n      mkey\n    ).then(function (checksum) {\n      console.log(checksum);\n      paytmParams.head = {\n        signature: checksum,\n      };\n\n      var post_data = JSON.stringify(paytmParams);\n\n      var options = {\n        /* for Staging */\n        hostname: \"securegw-stage.paytm.in\" /* for Production */,\n\n        // hostname: 'securegw.paytm.in',\n\n        port: 443,\n        path: `/theia/api/v1/initiateTransaction?mid=${mid}&orderId=${orderId}`,\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Content-Length\": post_data.length,\n        },\n      };\n\n      var response = \"\";\n      var post_req = https.request(options, function (post_res) {\n        post_res.on(\"data\", function (chunk) {\n          response += chunk;\n        });\n        post_res.on(\"end\", function () {\n          console.log(\"Response: \", response);\n          // res.json({data: JSON.parse(response), orderId: orderId, mid: mid, amount: amount});\n          setPaymentData({\n            ...paymentData,\n            token: JSON.parse(response).body.txnToken,\n            order: orderId,\n            mid: mid,\n            amount: 100,\n          });\n        });\n      });\n\n      post_req.write(post_data);\n      post_req.end();\n    });\n  };\n\n  const makePayment = () => {\n    setLoading(true);\n    var config = {\n      root: \"\",\n      style: {\n        bodyBackgroundColor: \"#fafafb\",\n        bodyColor: \"\",\n        themeBackgroundColor: \"#0FB8C9\",\n        themeColor: \"#ffffff\",\n        headerBackgroundColor: \"#284055\",\n        headerColor: \"#ffffff\",\n        errorColor: \"\",\n        successColor: \"\",\n        card: {\n          padding: \"\",\n          backgroundColor: \"\",\n        },\n      },\n      data: {\n        orderId: paymentData.order,\n        token: paymentData.token,\n        tokenType: \"TXN_TOKEN\",\n        amount: paymentData.amount /* update amount */,\n      },\n      payMode: {\n        labels: {},\n        filter: {\n          exclude: [],\n        },\n        order: [\"CC\", \"DC\", \"NB\", \"UPI\", \"PPBL\", \"PPI\", \"BALANCE\"],\n      },\n      website: \"WEBSTAGING\",\n      flow: \"DEFAULT\",\n      merchant: {\n        mid: paymentData.mid,\n        redirect: false,\n      },\n      handler: {\n        transactionStatus: function transactionStatus(paymentStatus) {\n          window.location.reload();\n          console.log(\"paymentStatus => \", paymentStatus);\n          setLoading(false);\n        },\n        notifyMerchant: function notifyMerchant(eventName, data) {\n          console.log(\"Closed\");\n          setLoading(false);\n        },\n      },\n    };\n\n    if (window.Paytm && window.Paytm.CheckoutJS) {\n      // initialze configuration using init method\n      window.Paytm.CheckoutJS.init(config)\n        .then(function onSuccess() {\n          console.log(\"Before JS Checkout invoke\");\n          // after successfully update configuration invoke checkoutjs\n          window.Paytm.CheckoutJS.invoke();\n        })\n        .catch(function onError(error) {\n          console.log(\"Error => \", error);\n        });\n    }\n  };\n\n  return (\n    <div>\n      {loading ? (\n        <img src=\"https://c.tenor.com/I6kN-6X7nhAAAAAj/loading-buffering.gif\" />\n      ) : (\n        <button onClick={makePayment}>Pay Now</button>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}