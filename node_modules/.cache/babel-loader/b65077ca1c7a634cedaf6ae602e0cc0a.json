{"ast":null,"code":"\"use strict\";import _regeneratorRuntime from\"/Users/apple/Documents/pp/doggiesthan app/spa/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/apple/Documents/pp/doggiesthan app/spa/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/apple/Documents/pp/doggiesthan app/spa/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/apple/Documents/pp/doggiesthan app/spa/node_modules/@babel/runtime/helpers/esm/createClass.js\";var crypto=require(\"crypto\");var PaytmChecksum=/*#__PURE__*/function(){function PaytmChecksum(){_classCallCheck(this,PaytmChecksum);}_createClass(PaytmChecksum,null,[{key:\"encrypt\",value:function encrypt(input,key){var cipher=crypto.createCipheriv(\"AES-128-CBC\",key,PaytmChecksum.iv);var encrypted=cipher.update(input,\"binary\",\"base64\");encrypted+=cipher.final(\"base64\");return encrypted;}},{key:\"decrypt\",value:function decrypt(encrypted,key){var decipher=crypto.createDecipheriv(\"AES-128-CBC\",key,PaytmChecksum.iv);var decrypted=decipher.update(encrypted,\"base64\",\"binary\");try{decrypted+=decipher.final(\"binary\");}catch(e){console.log(e);}return decrypted;}},{key:\"generateSignature\",value:function generateSignature(params,key){if(typeof params!==\"object\"&&typeof params!==\"string\"){var error=\"string or object expected, \"+typeof params+\" given.\";return Promise.reject(error);}if(typeof params!==\"string\"){params=PaytmChecksum.getStringByParams(params);}return PaytmChecksum.generateSignatureByString(params,key);}},{key:\"verifySignature\",value:function verifySignature(params,key,checksum){if(typeof params!==\"object\"&&typeof params!==\"string\"){var error=\"string or object expected, \"+typeof params+\" given.\";return Promise.reject(error);}if(params.hasOwnProperty(\"CHECKSUMHASH\")){delete params.CHECKSUMHASH;}if(typeof params!==\"string\"){params=PaytmChecksum.getStringByParams(params);}return PaytmChecksum.verifySignatureByString(params,key,checksum);}},{key:\"generateSignatureByString\",value:function(){var _generateSignatureByString=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params,key){var salt;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return PaytmChecksum.generateRandomString(4);case 2:salt=_context.sent;return _context.abrupt(\"return\",PaytmChecksum.calculateChecksum(params,key,salt));case 4:case\"end\":return _context.stop();}},_callee);}));function generateSignatureByString(_x,_x2){return _generateSignatureByString.apply(this,arguments);}return generateSignatureByString;}()},{key:\"verifySignatureByString\",value:function verifySignatureByString(params,key,checksum){var paytm_hash=PaytmChecksum.decrypt(checksum,key);var salt=paytm_hash.substr(paytm_hash.length-4);return paytm_hash===PaytmChecksum.calculateHash(params,salt);}},{key:\"generateRandomString\",value:function generateRandomString(length){return new Promise(function(resolve,reject){crypto.randomBytes(length*3.0/4.0,function(err,buf){if(!err){var salt=buf.toString(\"base64\");resolve(salt);}else{console.log(\"error occurred in generateRandomString: \"+err);reject(err);}});});}},{key:\"getStringByParams\",value:function getStringByParams(params){var data={};Object.keys(params).sort().forEach(function(key,value){data[key]=params[key]!==null&&params[key].toLowerCase()!==\"null\"?params[key]:\"\";});return Object.values(data).join(\"|\");}},{key:\"calculateHash\",value:function calculateHash(params,salt){var finalString=params+\"|\"+salt;return crypto.createHash(\"sha256\").update(finalString).digest(\"hex\")+salt;}},{key:\"calculateChecksum\",value:function calculateChecksum(params,key,salt){var hashString=PaytmChecksum.calculateHash(params,salt);return PaytmChecksum.encrypt(hashString,key);}}]);return PaytmChecksum;}();PaytmChecksum.iv=\"@@@@&&&&####$$$$\";module.exports=PaytmChecksum;","map":{"version":3,"names":["crypto","require","PaytmChecksum","input","key","cipher","createCipheriv","iv","encrypted","update","final","decipher","createDecipheriv","decrypted","e","console","log","params","error","Promise","reject","getStringByParams","generateSignatureByString","checksum","hasOwnProperty","CHECKSUMHASH","verifySignatureByString","generateRandomString","salt","calculateChecksum","paytm_hash","decrypt","substr","length","calculateHash","resolve","randomBytes","err","buf","toString","data","Object","keys","sort","forEach","value","toLowerCase","values","join","finalString","createHash","digest","hashString","encrypt","module","exports"],"sources":["/Users/apple/Documents/pp/doggiesthan app/spa/src/paytm-button/paytmChecksum.js"],"sourcesContent":["\"use strict\";\n\nvar crypto = require(\"crypto\");\n\nclass PaytmChecksum {\n  static encrypt(input, key) {\n    var cipher = crypto.createCipheriv(\"AES-128-CBC\", key, PaytmChecksum.iv);\n    var encrypted = cipher.update(input, \"binary\", \"base64\");\n    encrypted += cipher.final(\"base64\");\n    return encrypted;\n  }\n  static decrypt(encrypted, key) {\n    var decipher = crypto.createDecipheriv(\n      \"AES-128-CBC\",\n      key,\n      PaytmChecksum.iv\n    );\n    var decrypted = decipher.update(encrypted, \"base64\", \"binary\");\n    try {\n      decrypted += decipher.final(\"binary\");\n    } catch (e) {\n      console.log(e);\n    }\n    return decrypted;\n  }\n  static generateSignature(params, key) {\n    if (typeof params !== \"object\" && typeof params !== \"string\") {\n      var error = \"string or object expected, \" + typeof params + \" given.\";\n      return Promise.reject(error);\n    }\n    if (typeof params !== \"string\") {\n      params = PaytmChecksum.getStringByParams(params);\n    }\n    return PaytmChecksum.generateSignatureByString(params, key);\n  }\n\n  static verifySignature(params, key, checksum) {\n    if (typeof params !== \"object\" && typeof params !== \"string\") {\n      var error = \"string or object expected, \" + typeof params + \" given.\";\n      return Promise.reject(error);\n    }\n    if (params.hasOwnProperty(\"CHECKSUMHASH\")) {\n      delete params.CHECKSUMHASH;\n    }\n    if (typeof params !== \"string\") {\n      params = PaytmChecksum.getStringByParams(params);\n    }\n    return PaytmChecksum.verifySignatureByString(params, key, checksum);\n  }\n\n  static async generateSignatureByString(params, key) {\n    var salt = await PaytmChecksum.generateRandomString(4);\n    return PaytmChecksum.calculateChecksum(params, key, salt);\n  }\n\n  static verifySignatureByString(params, key, checksum) {\n    var paytm_hash = PaytmChecksum.decrypt(checksum, key);\n    var salt = paytm_hash.substr(paytm_hash.length - 4);\n    return paytm_hash === PaytmChecksum.calculateHash(params, salt);\n  }\n\n  static generateRandomString(length) {\n    return new Promise(function (resolve, reject) {\n      crypto.randomBytes((length * 3.0) / 4.0, function (err, buf) {\n        if (!err) {\n          var salt = buf.toString(\"base64\");\n          resolve(salt);\n        } else {\n          console.log(\"error occurred in generateRandomString: \" + err);\n          reject(err);\n        }\n      });\n    });\n  }\n\n  static getStringByParams(params) {\n    var data = {};\n    Object.keys(params)\n      .sort()\n      .forEach(function (key, value) {\n        data[key] =\n          params[key] !== null && params[key].toLowerCase() !== \"null\"\n            ? params[key]\n            : \"\";\n      });\n    return Object.values(data).join(\"|\");\n  }\n\n  static calculateHash(params, salt) {\n    var finalString = params + \"|\" + salt;\n    return crypto.createHash(\"sha256\").update(finalString).digest(\"hex\") + salt;\n  }\n  static calculateChecksum(params, key, salt) {\n    var hashString = PaytmChecksum.calculateHash(params, salt);\n    return PaytmChecksum.encrypt(hashString, key);\n  }\n}\nPaytmChecksum.iv = \"@@@@&&&&####$$$$\";\nmodule.exports = PaytmChecksum;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}