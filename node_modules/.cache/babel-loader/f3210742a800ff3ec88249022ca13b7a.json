{"ast":null,"code":"import { getTextWidth, getTextHeight, assembleFont } from '../util/text';\nexport default function (shape) {\n  var attrs = shape.attr();\n  var x = attrs.x,\n    y = attrs.y,\n    text = attrs.text,\n    fontSize = attrs.fontSize,\n    lineHeight = attrs.lineHeight;\n  var font = attrs.font;\n  if (!font) {\n    // 如果未组装 font\n    font = assembleFont(attrs);\n  }\n  var width = getTextWidth(text, font);\n  var bbox;\n  if (!width) {\n    // 如果width不存在，四点共其实点\n    bbox = {\n      x: x,\n      y: y,\n      width: 0,\n      height: 0\n    };\n  } else {\n    var textAlign = attrs.textAlign,\n      textBaseline = attrs.textBaseline;\n    var height = getTextHeight(text, fontSize, lineHeight); // attrs.height\n    // 默认左右对齐：left, 默认上下对齐 bottom\n    var point = {\n      x: x,\n      y: y - height\n    };\n    if (textAlign) {\n      if (textAlign === 'end' || textAlign === 'right') {\n        point.x -= width;\n      } else if (textAlign === 'center') {\n        point.x -= width / 2;\n      }\n    }\n    if (textBaseline) {\n      if (textBaseline === 'top') {\n        point.y += height;\n      } else if (textBaseline === 'middle') {\n        point.y += height / 2;\n      }\n    }\n    bbox = {\n      x: point.x,\n      y: point.y,\n      width: width,\n      height: height\n    };\n  }\n  return bbox;\n}","map":{"version":3,"sources":["../../src/bbox/text.ts"],"names":[],"mappings":"AAEA,SAAS,YAAY,EAAE,aAAa,EAAE,YAAY,QAAQ,cAAc;AAExE,eAAc,UAAW,KAAa,EAAA;EACpC,IAAM,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE;EAClB,IAAA,CAAC,GAAoC,KAAK,CAAA,CAAzC;IAAE,CAAC,GAAiC,KAAK,CAAA,CAAtC;IAAE,IAAI,GAA2B,KAAK,CAAA,IAAhC;IAAE,QAAQ,GAAiB,KAAK,CAAA,QAAtB;IAAE,UAAU,GAAK,KAAK,CAAA,UAAV;EACxC,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI;EACrB,IAAI,CAAC,IAAI,EAAE;IACT;IACA,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC;EAC3B;EACD,IAAM,KAAK,GAAG,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC;EACtC,IAAI,IAAI;EACR,IAAI,CAAC,KAAK,EAAE;IACV;IACA,IAAI,GAAG;MACL,CAAC,EAAA,CAAA;MACD,CAAC,EAAA,CAAA;MACD,KAAK,EAAE,CAAC;MACR,MAAM,EAAE;KACT;GACF,MAAM;IACG,IAAA,SAAS,GAAmB,KAAK,CAAA,SAAxB;MAAE,YAAY,GAAK,KAAK,CAAA,YAAV;IAC/B,IAAM,MAAM,GAAG,aAAa,CAAC,IAAI,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC;IAC1D;IACA,IAAM,KAAK,GAAG;MACZ,CAAC,EAAA,CAAA;MACD,CAAC,EAAE,CAAC,GAAG;KACR;IACD,IAAI,SAAS,EAAE;MACb,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,KAAK,OAAO,EAAE;QAChD,KAAK,CAAC,CAAC,IAAI,KAAK;OACjB,MAAM,IAAI,SAAS,KAAK,QAAQ,EAAE;QACjC,KAAK,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC;MACrB;IACF;IACD,IAAI,YAAY,EAAE;MAChB,IAAI,YAAY,KAAK,KAAK,EAAE;QAC1B,KAAK,CAAC,CAAC,IAAI,MAAM;OAClB,MAAM,IAAI,YAAY,KAAK,QAAQ,EAAE;QACpC,KAAK,CAAC,CAAC,IAAI,MAAM,GAAG,CAAC;MACtB;IACF;IAED,IAAI,GAAG;MACL,CAAC,EAAE,KAAK,CAAC,CAAC;MACV,CAAC,EAAE,KAAK,CAAC,CAAC;MACV,KAAK,EAAE,KAAK;MACZ,MAAM,EAAE;KACT;EACF;EACD,OAAO,IAAI;AACb","sourceRoot":"","sourcesContent":["import { getTextWidth, getTextHeight, assembleFont } from '../util/text';\nexport default function (shape) {\n    var attrs = shape.attr();\n    var x = attrs.x, y = attrs.y, text = attrs.text, fontSize = attrs.fontSize, lineHeight = attrs.lineHeight;\n    var font = attrs.font;\n    if (!font) {\n        // 如果未组装 font\n        font = assembleFont(attrs);\n    }\n    var width = getTextWidth(text, font);\n    var bbox;\n    if (!width) {\n        // 如果width不存在，四点共其实点\n        bbox = {\n            x: x,\n            y: y,\n            width: 0,\n            height: 0,\n        };\n    }\n    else {\n        var textAlign = attrs.textAlign, textBaseline = attrs.textBaseline;\n        var height = getTextHeight(text, fontSize, lineHeight); // attrs.height\n        // 默认左右对齐：left, 默认上下对齐 bottom\n        var point = {\n            x: x,\n            y: y - height,\n        };\n        if (textAlign) {\n            if (textAlign === 'end' || textAlign === 'right') {\n                point.x -= width;\n            }\n            else if (textAlign === 'center') {\n                point.x -= width / 2;\n            }\n        }\n        if (textBaseline) {\n            if (textBaseline === 'top') {\n                point.y += height;\n            }\n            else if (textBaseline === 'middle') {\n                point.y += height / 2;\n            }\n        }\n        bbox = {\n            x: point.x,\n            y: point.y,\n            width: width,\n            height: height,\n        };\n    }\n    return bbox;\n}\n//# sourceMappingURL=text.js.map"]},"metadata":{},"sourceType":"module"}